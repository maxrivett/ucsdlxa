<!DOCTYPE html>
<html lang="en">
<head>
    <!-- iid: 122 -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">

    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.min.css" rel="stylesheet">

    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css114/LibCal_public.min.css" rel="stylesheet">
    <link href="/css114/print.min.css" rel="stylesheet" media="print">
    

    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="/js114/jquery.min.js">\x3C/script>');
    </script>

        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script>
        jQuery.ui || document.write('<script src="/js114/jquery-ui.min.js">\x3C/script>');
    </script>

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        (typeof $().modal == 'function') || document.write('<script src="/js114/bootstrap.min.js">\x3C/script>');
    </script>
    <script src="/js114/LibCal_public.min.js"></script>
        <script>
    springSpace.dateFormat = "dddd, MMMM D, YYYY";
    springSpace.dateShortFormat = "MM/DD/YYYY";
    springSpace.timeFormat = "h:mma";
    springSpace.timezone = 'Japan/Tokyo';
    springSpace.currency = "USD";
    springSpace.currencySymbol = "$";

    springSpace.language = 'en'; // en
    springSpace.locale = 'en-US'; // en-US

    springSpace.phpTimeFormat = 'g:ia';

    springSpace.bootstrapAsset = '/css114/bootstrap.min.css';
    springSpace.publicCssAsset = '/css114/LibCal_public.min.css';
    springSpace.adminCssAsset = '/css114/LibCal_admin.min.css';
</script>
    <script>
         var springLang  = { eq_GoToNextAvailable: "Next Available", eq_js_add_cart_btn: "Add to Cart", eq_js_add_cc_btn: "Add to Cart & Checkout", eq_js_add_eq_btn: "Add Equipment", eq_js_add_start: "All additional items must have a starting time of", eq_js_add_to_cart: "Add Item to Cart", eq_js_booking_summary_title: "Thank you!", eq_js_cart_tt: "Create a shopping cart with these space bookings, and go to equipment booking page to add more items to the cart.", eq_js_close: "Close", eq_js_date: "Change Return Date", eq_js_det_return: "Determining return time", eq_js_from: "From:", eq_js_from_det: "from", eq_js_go_to_date: "Go To Date", eq_js_isRequired: "is required!", eq_js_rem_pending: "Remove Pending Booking", eq_js_spacew_forb_multi: "Forbidden from booking same resource multiple times in a single booking.<br><br>Please only select sequential checkboxes.", eq_js_spacew_forb_single: "Forbidden from booking different resources in a single booking.", eq_js_to: "To:", eq_js_until_det: "until...", eq_start_over: "Make Another Booking", eq_unavail: "Unavailable/Padding", eq_your_book: "Your Booking" };
    </script>
        <title>
                                      Space Availability - Geisel Library
             -
                Library Calendar -
        The Library
    </title>
        <link rel="stylesheet" href="/css114/fullcalendar.min.css"/>

    <style>
    .s-lc-eq-avail, .label-eq-avail, .s-lc-eq-period-available {
        background: #00629B none !important;
border-color: #00629B !important;
    }

    .s-lc-eq-avail:hover, .s-lc-eq-period-available:hover {
        background: #B2BDB3 none !important;
border-color: #B2BDB3 !important;
    }

    .s-lc-eq-pending, .label-eq-pending, .s-lc-eq-period-pending {
        background: #F59F16 none !important;
border-color: #F59F16 !important;
    }

    .s-lc-eq-checkout, .s-lc-eq-r-unavailable, .s-lc-eq-r-padding, .label-eq-unavailable, .s-lc-eq-period-booked {
        background: #C91908 none !important;
border-color: #C91908 !important;
    }
</style>

    <style>
        @media (max-width: 768px) {
            .fc-timeline .fc-cell-text {
                font-size: 12px !important;
            }
        }
    </style>
    <style>
	#s-lc-eq-navform {background:#747678;padding:15px;color:#fff;border-radius:3px;}
	#s-lc-eq-navform > form {display:flex;}
	#s-lc-eq-navform > form > div {flex-grow:1;padding-right:15px;}
	#s-lc-eq-navform > form > div:last-child {padding-right:0;}
	#s-lc-eq-navform > form > div > label {display:block;font-size:110%;}
	#s-lc-eq-navform > form > div > select {width:100%;}
	@media (min-width:768px) and (max-width:991px){
		#s-lc-eq-navform > form > div > label {display:block!important;}
	}
	@media (max-width:767px){
		#s-lc-eq-navform > form {flex-direction:column;}
		#s-lc-eq-navform > form > div {padding-right:0;}
	}
</style>


<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Condensed:wght@300&display=swap">
<script src="https://library.ucsd.edu/_files/site/js/draw-menu.js"></script>
<script src="https://library.ucsd.edu/assets/libapps/shared/campus-theme-v5.js"></script>
<link rel="stylesheet" href="https://library.ucsd.edu/assets/libapps/shared/campus-theme-v5.css">

<style>
/* hide 'check in' and 'check out' buttons at https://ucsd.libcal.com/r */
/* to reveal this buttons, delete the code below, and update language for check in and check out at https://ucsd.libcal.com/admin/settings/language */
#s-lc-new-reservation-checkin {display: none;}
#s-lc-new-reservation-checkout {display: none;}
/* hide libapps login [la footer] */
#s-lc-public-footer-admin-links {display: none;}
</style>

<!-- Hotjar Tracking Code for https://ucsd.libcal.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2627680,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
</head>
<body id="equip_" class="s-lc-public s-lc-public-page-5">

        <div class="sr-only">
        <a href="/r/accessible?lid=11273&gid=0">
            Alternate page for screen reader Users        </a>
    </div>

<a id="s-lc-public-skiplink" class="s-lc-skiplink alert-info" href="#s-lc-public-main">Skip to Main Content</a>

<div id="s-lc-public-cust-header" role="banner"><!-- CAMPUS LIKE HEADER -->
<header id="hc-header" class="container">
	<section class="layout-title d-none d-sm-block">
		<div class="layout-container container">
			<div class="w-50">
				<a href="https://library.ucsd.edu/" class="title-header title-header-large">The Library</a>
			</div>
			<div class="w-50">
				<a href="https://www.ucsd.edu/" class="title-logo">
					<img alt="UC San Diego" src="https://library.ucsd.edu/assets/libapps/shared/logo-ucsd-header.png">
				</a>
			</div>
		</div>
	</section>
</header>
<!-- /CAMPUS LIKE HEADER -->

<!-- DESKTOP TOP-NAV -->
<div id="top-nav">
	<div class="container">
		<!-- TOP-NAV SCRIPT -->
		<script>draw_ucsd_nav(top_nav);</script>
		<noscript>
			<ul>
				<li><a href="https://library.ucsd.edu/research-and-collections/index.html">Research &amp; Collections</a></li>
				<li><a href="https://library.ucsd.edu/borrow-and-request/index.html">Borrow &amp; Request</a></li>
				<li><a href="https://library.ucsd.edu/computing-and-technology/index.html">Computing &amp; Technology</a></li>
				<li><a href="https://library.ucsd.edu/visit/index.html">Visit</a></li>
				<li><a href="https://library.ucsd.edu/ask-us/index.html">Ask Us</a></li>
				<li><a href="https://library.ucsd.edu/about/index.html">About</a></li>
				<li><a href="https://library.ucsd.edu/hours/index.html">Hours</a></li>
			</ul>
		</noscript>
		<!-- /TOP-NAV SCRIPT -->
	</div>
</div>
<!-- /DESKTOP TOP-NAV -->

<!-- MOBILE TOP-NAV -->
<div id="mtn-side-nav" aria-hidden="true">
	<script>draw_ucsd_nav(top_nav);</script>
</div>
<div id="mtn-overlay" onclick="closeNav()" aria-hidden="true"></div>
<div id="mtn-control" aria-hidden="true">
	<button onclick="openNav()"><i class="fa fa-bars"></i> MENU</button>
	<img alt="UC San Diego" class="img-responsive mtn-logo" src="https://library.ucsd.edu/assets/libapps/shared/logo-ucsd-footer.png">
</div>
<!-- /MOBILE TOP-NAV --></div>
<div class="container">
    
    <div id="s-lc-public-bc" class="row">
        <div class="col-md-12">
            <nav aria-label="Breadcrumb">
                <ol class="breadcrumb">
                    <li>
                        <a href="http://library.ucsd.edu">
                            The Library
                        </a>
                    </li>

                    <li class="s-lc-desktop-only">
                        <a href="https://ucsd.libcal.com">
                            Library Calendar
                        </a>
                    </li>

                    
                                            <li class="active s-lc-desktop-only">
                                              Space Availability - Geisel Library
            
                        </li>
                    
                            <li class="s-lc-breadcrumb-right s-lc-libauth-logout">
        <a class="s-lc-session-aware-link" href="/spaces/logout?session=">
            MAX RIVETT
            - Logout
        </a>
    </li>
                </ol>
            </nav>
        </div>
    </div>

    <noscript>
        <div class="alert alert-danger" id="noscript">Your browser has javascript disabled. Without javascript some functions will not work.</div>
    </noscript>

            
            
    <main>
            <div id="s-lc-public-main" class="s-lc-public-main">
        <div id="s-lc-public-page-content" class="row">
            
            <div id="col1" class="col-md-12 center" >
                                    <div id="s-lc-eq-navform" class="s-lc-spaces-setup-info">
                        <h1 class="sr-only">                  Space Availability - Geisel Library
            </h1>

                        
                        <form class="form-inline" role="search">
                            <input type="hidden" name="page" id="page" value="1">
                            <input type="hidden" name="type" id="type" value="2">

                                                            <div class="form-group form-group-sm">
                                    <label class="hidden-sm" for="lid">Building</label>
                                    <select class="form-control" name="lid" id="lid">
                                        
                                                                                    <option value="11273" selected="selected">Geisel Library</option>

                                                                                                                                <option value="11274" >WongAvery Library</option>

                                                                                    
                                                                                    <option value="0">
                                                View All Locations
                                            </option>
                                                                            </select>
                                </div>
                                                                <div class="form-group form-group-sm">
                                    <label class="hidden-sm" for="gid">Type of Space</label>
                                    <select class="form-control" name="gid" id="gid">
                                                                                    <option value="35688" >Geisel Floors 1 &amp; 2 Study Rooms</option>
                                                                                    <option value="35689" >Geisel Tower Study Rooms (Floors 5-7)</option>
                                                                                    <option value="35687" >Geisel Service Hub Rooms (2nd floor)</option>
                                                                                    <option value="21660" >Digital Media Lab (DML) - Single Seats</option>
                                                                                    <option value="27115" >Data &amp; GIS Lab - Single Seats</option>
                                        
                                                                                    <option value="0" selected="selected">Show All</option>
                                                                            </select>
                                </div>
                                                            
                            <div class="form-group form-group-sm">
                                <label class="hidden-sm" for="capacity">
                                    Number of Seats
                                </label>

                                <select class="form-control" name="capacity" id="capacity">
                                    
                                                                            <option value="0">
                                            All Spaces (not seats)
                                        </option>
                                    
                                    
                                                                            <option value="1">
                                            Single Seats - Specialized Computing
                                        </option>
                                                                            <option value="2">
                                            Space For 2-4 people
                                        </option>
                                                                            <option value="3">
                                            Space For 5-8 people
                                        </option>
                                                                            <option value="4">
                                            Space For 8+ people
                                        </option>
                                                                    </select>
                            </div>

                                                     </form>
                    </div>
                
                                    <div id="s-lc-location-description" role="region" aria-label="description" class="s-lc-resource-description s-lc-spaces-setup-info">
                        <p><span style="font-size:16px;"><strong><span style="color:#e74c3c;">Various Library study rooms are undergoing painting and technology improvements.&nbsp; Bookings may be subject to cancellation.&nbsp; We apologize in advance for any inconvenience.</span></strong></span></p>

<p>You&#39;re currently using <i aria-hidden="true" class="fa fa-calendar"></i> Calendar View. | Switch to <a href="/r/accessible"><i aria-hidden="true" class="fa fa-file-text-o"></i> Text-only View.</a></p>

<p>Please be sure to review our <a href="https://library.ucsd.edu/visit/study-spaces/reserve-study-room.html" onclick="window.open(this.href, '', 'resizable=yes,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=no'); return false;">UCSD Library reservation policies</a> before proceeding with your reservation.</p>

                    </div>
                
                
                <div id="s-lc-window-limit-warning" class="alert alert-info margin-top-med margin-bottom-none" role="alert" style="display: none;">
    You have reached the end of the bookable window. No availability will be shown past this point.
</div>

                <div id="s-lc-session-warning" class="alert alert-warning" role="alert" style="display: none;">
                    Your session is about to expire, <a id="s-lc-session-warning-continue" href="#">click here</a> to continue your session.
                </div>

                <div id="s-lc-session-expired" class="alert alert-danger" role="alert" style="display: none;">
                    Your session has expired, please <a id="s-lc-session-expired-reload" href="#">reload</a> the page to start again.
                </div>

                <div id="time_grid_cont" role="grid" class="s-lc-spaces-time-grid s-lc-spaces-setup-info">
                        <div id="eq-time-grid">
    </div>

    <div id="s-lc-time-grid-pagination" class="s-lc-time-grid-pagination">
    </div>

    <div class="s-lc-time-grid-legend" id="eq-time-grid-legend">
        <span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="Slot is available, click to book!"><span class="label label-eq-avail">&nbsp;&nbsp;</span> Available</span>
<span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="Your pending booking."><span class="label label-eq-pending">&nbsp;&nbsp;</span> Your Booking</span>
<span class="label-eq-cont" data-toggle="tooltip" data-placement="top" title="This slot is unavailable for starting a new booking. Bookings may occasionally extend into this slot."><span class="label label-eq-unavailable">&nbsp;&nbsp;</span> Unavailable/Padding</span>    </div>
                </div>

                <div id="s-lc-eq-form-box" class="s-lc-spaces-setup-info" style="display: none;" role="region" aria-label="booking form" aria-live="polite">
                    <form id="s-lc-eq-form-times" class="form-horizontal" method="post">
                        <fieldset>
                            <div id="s-lc-eq-bwell" class="well" tabindex="0">&nbsp;</div>
                            <div id="s-lc-eq-bform-inner" class="col-sm-offset-5">
                                <button class="btn btn-primary" name="submit_times" id="submit_times">Submit Times</button>&nbsp;
                                                            </div>
                        </fieldset>
                    </form>
                </div>

                <div id="s-lc-eq-form" style="clear:both; display: none;" role="region" aria-live="polite" aria-label="Booking details"></div>

                <div id="s-lc-eq-errors" class="alert alert-danger" style="display: none;" role="region" aria-live="polite" aria-label="Error encountered"></div>

                <div id="s-lc-eq-success" style="display: none;" role="region" aria-live="polite" aria-labelledby="s-lc-eq-success-title">
                    <h1 id="s-lc-eq-success-title">Thank you!</h1>

                    <div id="s-lc-eq-success-content"></div>
                </div>

            </div>
        </div>
    </div>
    </main>

    <footer id="s-lc-public-footer" class="s-lc-public-footer row">
        <div id="s-lc-public-footer-brand">
            <span title="libcal-us-3">Powered by</span> <a href="https://www.springshare.com">Springshare</a>.
        </div>
        <div id="s-lc-public-footer-rights">
            All rights reserved.
        </div>

                    <div id="s-lc-footer-support-link">
                <a href="mailto:lib-itsd@ucsd.edu">Report a tech support issue.</a>
            </div>
        
                <div id="s-lc-public-footer-print-link">
        View this page in a format suitable for
        <a href="/r/accessible?lid=11273&gid=0">
            screen-readers and keyboard-only users
        </a>
    </div>

        <div id="s-lc-public-footer-admin-links" role="navigation" aria-label="Admin Footer">
                            <a id="s-lc-sign-in" href="https://ucsd.libapps.com/libapps/login.php?site_id=4199&amp;target=">Login to LibApps</a>
                    </div>

        <div class="s-lc-public-footer-actions">
    
<div id="s-lc-language">
    <select id="s-lc-language-selector" aria-label="Select Language">
                <option value="cy" >Cymraeg</option>
                <option value="en" selected>English</option>
                <option value="es" >español</option>
                <option value="fr" >français</option>
                <option value="ga" >Irish</option>
                <option value="ja" >日本語 Nihongo</option>
                <option value="sl" >slovenski jezik</option>
                <option value="vi" >Tiếng Việt</option>
                <option value="zh" >中文 Zhōngwén</option>
            </select>
</div>
</div>
    </footer>

    <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3409104-8', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
</div>

<div id="s-lc-public-cust-footer"><!-- CAMPUS LIKE FOOTER -->
<footer id="hc-footer">
	<section class="container">
		<div class="row">
			<div class="col-sm-8">
				<p>
					<span>UC San Diego 9500 Gilman Dr. La Jolla, CA 92093 (858) 534-2230</span><br>
				<span>Copyright © <span class="footer-copyright-year">2020</span> Regents of the University of California. All rights reserved.</span>
				</p>
				<ul class="footer-links">
					<li><a href="https://www.ucsd.edu/_about/legal/index.html">Terms & Conditions</a></li>
				</ul>
			</div>
			<div class="col-sm-4">
				<a href="https://www.ucsd.edu/" class="cd-footer-logo">
					<img alt="UC San Diego" class="img-responsive footer-logo" src="https://library.ucsd.edu/assets/libapps/shared/logo-ucsd-footer.png">
				</a>
			</div>
		</div>
	</section>
</footer>
<!-- /CAMPUS LIKE FOOTER --></div>
                <script src="/js114/fullcalendar.min.js"></script>
        <script src="/js114/datepicker.min.js"></script>
    <link rel="stylesheet" href="/css114/datepicker.min.css"/>

    <script>
    var springyFullCalendar = {
        commonOptions: {
            schedulerLicenseKey: '0391239527-fcs-1659132663',
            now: '2022\u002D10\u002D17\u002020\u003A08',
            nowIndicator: true,
            scrollTime: '19\u003A00\u003A00',
            lazyFetching: false,
            locale: springSpace.language,
            themeSystem: 'bootstrap',
            eventTextColor: '#222',
            eventDisplay: 'block',
            moreLinkClick: 'day',
            bootstrapFontAwesome: {
                goToDate: 'fa-calendar',
                goToNextAvailable: 'fa-fast-forward',
                refresh: 'fa-refresh',
            },
            navLinks: true, // https://fullcalendar.io/docs/navLinks
            resourceOrder: false, // https://fullcalendar.io/docs/resourceOrder
            stickyHeaderDates: false, // https://fullcalendar.io/docs/stickyHeaderDates && https://github.com/springshare/LibCal/issues/11801
        },
        timelineOptions: {
            height: 'auto',
            refetchResourcesOnNavigate: false,
            eventOverlap: false,
            displayEventTime: false,
            slotDuration: '00\u003A30',
            titleFormat: springSpace.dateFormat,
            views: {
                timelineSingleDay: {
                    type: 'resourceTimeline',
                    buttonText: 'Day\u0020View',
                    duration: {days: 1},
                    slotLabelFormat: springSpace.timeFormat,
                },
                timelineHourlyShort: {
                    type: 'resourceTimeline',
                    duration: {days: 3},
                    slotLabelFormat: [springSpace.dateFormat, springSpace.timeFormat],
                },
                timelineHourlyLong: {
                    type: 'resourceTimeline',
                    duration: {days: 7},
                    slotLabelFormat: [springSpace.dateFormat, springSpace.timeFormat],
                },
                timelineDailyLong: {
                    type: 'resourceTimeline',
                    slotDuration: '24:00',
                    duration: {days: 28},
                    slotLabelFormat: ['dd D'],
                    nowIndicator: false
                },
                resourceTimeGridWeek: {
                    buttonText: 'Week\u0020View',
                    slotLabelFormat: springSpace.timeFormat,
                }
            },
        },
        publicTexts: {
            allDay: 'All\u0020Day',
            available: 'Available',
            dayGridMonth: 'Month',
            dayGridWeek: 'Agenda',
            goToDate: 'Go\u0020To\u0020Date',
            goToNextAvailable: 'Next\u0020Available',
            next: 'Next',
            prev: 'Previous',
            timeGridDay: 'Day',
            timeGridWeek: 'Week',
            today: 'Today',
            unavailable: 'Unavailable\/Padding',
            yourBooking: 'Your\u0020Booking',
            listWeek: 'Week\u0020List',
        },
        adminTexts: {
            goToDate: 'Go\u0020To\u0020Date',
            refresh: 'Refresh',
            prev: 'Previous',
            next: 'Next',
            today: 'Today',
            week: 'Week',
            month: 'Month',
            day: 'Day',
            dayGridWeek: 'Agenda',
            allDay: 'All\u0020Day',
            atLocation: '\u0025title\u0025\u0020at\u0020\u0025location\u0025',
        },
        dateTimeFormats: {
            monthViewTitle: 'MMMM YYYY',
        },
    };

    // placeholder for dynamic content boxes with a full calendar
    var calendarList = {};

    function reRenderCalendarList() {
        for (var calId in calendarList) {
            calendarList[calId].render();
        }
    }
</script>
<script src="/js114/direct/full-calendar-common.min.js"></script>

    <script src="/js114/direct/public/equipment/common.min.js"></script>
    <script src="/js114/direct/public/equipment/spaces.min.js"></script>
    <script>
        var pendingRoomBookings = [];
        var pendingBookingNextId = 1;
        var pendingBookingsBlowAwayCart = false;

        function addError(msg, id) {
            jQuery(".s-lc-eq-" + id).addClass("has-error").find(".form-control").attr("aria-invalid", true);
            jQuery(".s-lc-eq-" + id).find(".s-lc-eq-flab").append('<div class="error-message">' + msg + "</div>");
            jQuery("#" + id).focus();
            return false;
        }

        function removeErrors() {
            jQuery(".s-lc-eq-q").removeClass("has-error").find(".error-message").remove();
        }

        function agreeToTermsAndConditions() {
            jQuery("#bform-terms-container").hide();

            // sometimes we need to check the patron's email before showing the booking form
            var emailRestrictionCheck = jQuery("#s-lc-booking-restriction-check");
            if (emailRestrictionCheck.length > 0) {
                emailRestrictionCheck.show();
                return false;
            }

            // other times we jump directly to the booking form
            jQuery("#bform-form-container").show();

            scrollAndFocusOnElement('#s-lc-bform-help');

            springySpaces.updateSession();

            return false;
        }

                var locationIsUsingLibAuth = true;

        function customFormValidation() {
            // exists to be overwritten by the specific group validation function
        }

        function preFormValidationAndPayload() {
            removeErrors();
            jQuery("#s-lc-eq-errors").hide();

            if (!isVisibleFieldsValid()) {
                return false;
            }

            if (!customFormValidation()) {
                return false;
            }

            springySpaces.stopSessionTimer();
            pageBusyBegin("#btn-form-submit");

            var formElement = '#s-lc-eq-bform';
            var bookings = preparePendingBookingsPayload();
            var bookingsPayload = JSON.stringify(bookings);

            springyCommon.appendHiddenInput('session', springySpaces.sessionId, formElement);
            springyCommon.appendHiddenInput('bookings', bookingsPayload, formElement);
            springyCommon.appendHiddenInput('returnUrl', springySpaces.getReturnUrl(), formElement);
            springyCommon.appendHiddenInput('pickupHolds', jQuery('#s-lc-pickup-holds').val(), formElement);
            springyCommon.appendHiddenInput('method', springyPage.bookingMethod, formElement);

            return true;
        }

        function bookingSuccessCallback(data) {
            pageBusyEnd("#btn-form-submit");
            if (data.error) {
                jQuery("#s-lc-eq-errors").html(data.error).show();
                return;
            }

            jQuery('#s-lc-eq-form, .s-lc-spaces-setup-info').hide();
            jQuery("#s-lc-eq-success-content").html(data.html)
            jQuery("#s-lc-eq-success").show().focus();

            return;
        }

        function bookingErrorCallback(xhr) {
            pageBusyEnd("#btn-form-submit");
            ajaxErrorHandler(xhr);
        }

        function submitPendingTimes() {
            var payload = {
                session: springySpaces.sessionId,
                patron: springySpaces.patron,
                patronHash: springySpaces.patronHash,
                bookings: preparePendingBookingsPayload(),
            };

            springySpaces.stopSessionTimer();
            pageBusyBegin("#submit_times");

            jQuery.ajax({
                type: 'post',
                url: "/ajax/space/times",
                data: payload,
                dataType: "html",
            })
            .always(function (data) {
                pageBusyEnd("#submit_times");
            })
            .done(function(data) {
                // hide a bunch of stuff
                jQuery('.s-lc-spaces-setup-info').hide();

                // setup booking form + terms html
                jQuery("#s-lc-eq-form").html(data).show();

                // scroll to the top of the page
                window.scrollTo(0, 0);

                springySpaces.startSessionTimer();
            })
            .fail(ajaxErrorHandler);

            return false;
        }

        function submitPendingRoomBookings_LibAuth() {
            var payload = {
                libAuth: true,
                blowAwayCart: true,
                returnUrl: springySpaces.getReturnUrl(),
                session: springySpaces.sessionId,
                bookings: preparePendingBookingsPayload(),
                method: springyPage.bookingMethod,
            };

            springySpaces.stopSessionTimer();
            workingAlert();

            jQuery.ajax({
                type: 'post',
                url: "/ajax/space/createcart",
                data: payload,
                dataType: 'json',
            })
            .always(function (data) {
                stopAlert();
            })
            .done(function(data) {
                if (data.success) {
                    // redirect to libauth checkout page
                    window.location = data.redirect;
                } else {
                    jQuery("#s-lc-eq-errors").html(data.error).show();
                }
            })
            .fail(ajaxErrorHandler);

            return false;
        }

        function makeCartAndGoToEquipPage() {
            // we only allow user to do this if all the room bookings start at the same time
            if (pendingRoomBookings.length > 1) {
                var startTime = pendingRoomBookings[0].start;
                for (var i = 1; i < pendingRoomBookings.length; i++) {
                    var bookingInfo = pendingRoomBookings[i];
                    if (!bookingInfo.start.isSame(startTime)) {
                        errorAlert('You can only create an Equipment Cart if all your room bookings begin at the same time.');
                        return false;
                    }
                }
            }

            var payload = {
                blowAwayCart: pendingBookingsBlowAwayCart,
                returnUrl: springySpaces.getReturnUrl(),
                session: springySpaces.sessionId,
                bookings: preparePendingBookingsPayload(),
                method: springyPage.bookingMethod,
            };

            springySpaces.stopSessionTimer();
            workingAlert();

            jQuery.ajax({
                type: 'post',
                url: "/ajax/space/createcart",
                data: payload,
                dataType: 'json',
            })
            .always(function (data) {
                stopAlert();
            })
            .done(function(data) {
                if (data.success) {
                    // redirect to new page
                    window.location = data.redirect;
                } else if (data.hasItems) {
                    errorAlert("Cart already has items in it. If you click the shopping cart again, the existing items in the cart will be replaced by the selected rooms.");
                    pendingBookingsBlowAwayCart = true;
                } else {
                    errorAlert(data.error);
                }
            })
            .fail(ajaxErrorHandler);

            return false;
        }

        function changeBookingTimes() {
            // show the old form box + availability grid
            jQuery('.s-lc-spaces-setup-info').show();

            // hide the terms + booking form
            jQuery('#s-lc-eq-form, #s-lc-eq-errors').hide();

            return false;
        }

        function getSpaceResourceContent(info) {
            var html = '';
            var resourceData = info.resource.extendedProps;
            var resourceId = springyPage.isSeatBooking ? resourceData.seatId : resourceData.eid;
            var title  = escapeHtml(info.fieldValue);

            if (resourceData.hasInfo) {
                html += '<a href="#" class="s-lc-item-more-info" data-eid="' + resourceId + '"' +
                    ' aria-label="Click\u0020for\u0020more\u0020info\u0020about ' + title + '">' +
                    '<span class="s-lc-info-label">Info</span>' +
                    '</a>';
            }

            var additionalClasses = '';
            var additionalIcons = '';

            if (resourceData.isAccessible) {
                additionalClasses += ' s-lc-accessible';
                additionalIcons += ' <i class="fa fa-wheelchair-alt fa-lg" aria-hidden="true"></i>';
            }

            if (resourceData.isPowered) {
                additionalClasses += ' s-lc-powered';
                additionalIcons += ' <i class="fa fa-plug fa-lg" aria-hidden="true"></i>';
            }

            var resourceLabel = '<span class="fc-cell-text' + additionalClasses + '">' + title + additionalIcons + '</span>';

            if (resourceData.url !== undefined) {
                html += '<a href="' + resourceData.url + '">' + resourceLabel + '</a>';
            } else {
                html += resourceLabel;
            }

            return {
                html: html,
            };
        }

        jQuery(function () {
            jQuery('#lid').on('change', goToPageForLocation);
            jQuery('#gid').on('change', goToPageForGroup);

            jQuery('#s-lc-session-warning-continue').on('click', springySpaces.updateSession);
            jQuery('#s-lc-session-expired-reload').on('click', function() {
                window.location.reload();

                return false;
            });

            jQuery('#eq_cart').on('click', makeCartAndGoToEquipPage);

            jQuery('#s-lc-eq-form-times').on('submit', function() {
                if (locationIsUsingLibAuth) {
                    return submitPendingRoomBookings_LibAuth();
                }

                return submitPendingTimes();
            });
        });
    </script>


    <script src="/js114/direct/pagination.min.js"></script>
    <script src="/js114/direct/public/equipment/spaces-standard.min.js"></script>
        <script>
        var springyPage = {
            wantAlternatingBackground: false,
            timelineOptions: {
                resourceAreaWidth: '33%',
            },
            locationId: 11273,
            groupId: 0,
            itemId: -1,
            isSeatBooking: 0,
            seatId: 0,
            zoneId: 0,
            isAccessible: 0,
            isPowered: 0,
            isDailyBookings: 0,
            resourceRows: 45,
            resourceColumnLabel: 'Room\/Space',
            viewMode: 'timelineSingleDay',
            returnUrl: '',
            capacitySeatValue: -1,
            pageIndex: 0,
            pageSize: 18,
            bookingMethod: 11,
        };

        var resources = [];
        var resourceNameIdMap = [];

                                                        resources.push({
    id: "eid_102827",
    title: "Geisel\u00201040\u003A\u00201st\u0020Floor\u0020West",
    url: "/space/102827",
    eid: 102827,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 5,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_1040.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_102827"] = "Geisel\u00201040\u003A\u00201st\u0020Floor\u0020West";                                    resources.push({
    id: "eid_103886",
    title: "Geisel\u00201041\u003A\u00201st\u0020Floor\u0020West",
    url: "/space/103886",
    eid: 103886,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 6,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_1041.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103886"] = "Geisel\u00201041\u003A\u00201st\u0020Floor\u0020West";                                    resources.push({
    id: "eid_103887",
    title: "Geisel\u00201042\u003A\u00201st\u0020Floor\u0020West",
    url: "/space/103887",
    eid: 103887,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 6,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_1042.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103887"] = "Geisel\u00201042\u003A\u00201st\u0020Floor\u0020West";                                    resources.push({
    id: "eid_103888",
    title: "Geisel\u00201045\u003A\u00201st\u0020Floor\u0020West",
    url: "/space/103888",
    eid: 103888,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 6,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_1045.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103888"] = "Geisel\u00201045\u003A\u00201st\u0020Floor\u0020West";                                    resources.push({
    id: "eid_103892",
    title: "Geisel\u00202070\u003A\u00202nd\u0020Floor\u0020East",
    url: "/space/103892",
    eid: 103892,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_2070.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103892"] = "Geisel\u00202070\u003A\u00202nd\u0020Floor\u0020East";                                    resources.push({
    id: "eid_103893",
    title: "Geisel\u00202071\u003A\u00202nd\u0020Floor\u0020East",
    url: "/space/103893",
    eid: 103893,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_2071.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103893"] = "Geisel\u00202071\u003A\u00202nd\u0020Floor\u0020East";                                    resources.push({
    id: "eid_103894",
    title: "Geisel\u00202072\u003A\u00202nd\u0020Floor\u0020East",
    url: "/space/103894",
    eid: 103894,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 8,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_2072.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103894"] = "Geisel\u00202072\u003A\u00202nd\u0020Floor\u0020East";                                    resources.push({
    id: "eid_102823",
    title: "Geisel\u00202096A\u003A\u00202nd\u0020Floor\u0020East",
    url: "/space/102823",
    eid: 102823,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 6,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_2096A.jpg",
    isAccessible: 1,
    isPowered: 1,
});

resourceNameIdMap["eid_102823"] = "Geisel\u00202096A\u003A\u00202nd\u0020Floor\u0020East";                                    resources.push({
    id: "eid_103889",
    title: "Geisel\u00202096B\uFF1A\u00202nd\u0020Floor\u0020East",
    url: "/space/103889",
    eid: 103889,
    gid: 35688,
    lid: 11273,
    grouping: "Geisel\u0020Floors\u00201\u0020\u0026\u00202\u0020Study\u0020Rooms",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 6,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_2096B.jpg",
    isAccessible: 1,
    isPowered: 1,
});

resourceNameIdMap["eid_103889"] = "Geisel\u00202096B\uFF1A\u00202nd\u0020Floor\u0020East";                                                                                    resources.push({
    id: "eid_103054",
    title: "Geisel\u0020518\u003A\u00205th\u0020Floor",
    url: "/space/103054",
    eid: 103054,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_518.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103054"] = "Geisel\u0020518\u003A\u00205th\u0020Floor";                                    resources.push({
    id: "eid_103055",
    title: "Geisel\u0020519\u003A\u00205th\u0020Floor",
    url: "/space/103055",
    eid: 103055,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_519.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103055"] = "Geisel\u0020519\u003A\u00205th\u0020Floor";                                    resources.push({
    id: "eid_103056",
    title: "Geisel\u0020521\u003A\u00205th\u0020Floor",
    url: "/space/103056",
    eid: 103056,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_521.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103056"] = "Geisel\u0020521\u003A\u00205th\u0020Floor";                                    resources.push({
    id: "eid_103057",
    title: "Geisel\u0020522\u003A\u00205th\u0020Floor",
    url: "/space/103057",
    eid: 103057,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_522.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103057"] = "Geisel\u0020522\u003A\u00205th\u0020Floor";                                    resources.push({
    id: "eid_103058",
    title: "Geisel\u0020618\u003A\u00206th\u0020Floor",
    url: "/space/103058",
    eid: 103058,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_618_b.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103058"] = "Geisel\u0020618\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103059",
    title: "Geisel\u0020619\u003A\u00206th\u0020Floor",
    url: "/space/103059",
    eid: 103059,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_619_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103059"] = "Geisel\u0020619\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103060",
    title: "Geisel\u0020620\u003A\u00206th\u0020Floor",
    url: "/space/103060",
    eid: 103060,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_620_b.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103060"] = "Geisel\u0020620\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103061",
    title: "Geisel\u0020622\u003A\u00206th\u0020Floor",
    url: "/space/103061",
    eid: 103061,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_622_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103061"] = "Geisel\u0020622\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103062",
    title: "Geisel\u0020623\u003A\u00206th\u0020Floor",
    url: "/space/103062",
    eid: 103062,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_623_b.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103062"] = "Geisel\u0020623\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103063",
    title: "Geisel\u0020624\u003A\u00206th\u0020Floor",
    url: "/space/103063",
    eid: 103063,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_624_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103063"] = "Geisel\u0020624\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103064",
    title: "Geisel\u0020625\u003A\u00206th\u0020Floor",
    url: "/space/103064",
    eid: 103064,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_625_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103064"] = "Geisel\u0020625\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103065",
    title: "Geisel\u0020626\u003A\u00206th\u0020Floor",
    url: "/space/103065",
    eid: 103065,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_626_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103065"] = "Geisel\u0020626\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103066",
    title: "Geisel\u0020627\u003A\u00206th\u0020Floor",
    url: "/space/103066",
    eid: 103066,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_627_b.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103066"] = "Geisel\u0020627\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103067",
    title: "Geisel\u0020629\u003A\u00206th\u0020Floor",
    url: "/space/103067",
    eid: 103067,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_629_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103067"] = "Geisel\u0020629\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103068",
    title: "Geisel\u0020630\u003A\u00206th\u0020Floor",
    url: "/space/103068",
    eid: 103068,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_630_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103068"] = "Geisel\u0020630\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103069",
    title: "Geisel\u0020631\u003A\u00206th\u0020Floor",
    url: "/space/103069",
    eid: 103069,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_631_a.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103069"] = "Geisel\u0020631\u003A\u00206th\u0020Floor";                                    resources.push({
    id: "eid_103070",
    title: "Geisel\u0020718\u003A\u00207th\u0020Floor",
    url: "/space/103070",
    eid: 103070,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_718.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103070"] = "Geisel\u0020718\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_103073",
    title: "Geisel\u0020719\u003A\u00207th\u0020Floor",
    url: "/space/103073",
    eid: 103073,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_719.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103073"] = "Geisel\u0020719\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_103074",
    title: "Geisel\u0020720\u003A\u00207th\u0020Floor",
    url: "/space/103074",
    eid: 103074,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_720.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103074"] = "Geisel\u0020720\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_103071",
    title: "Geisel\u0020721\u003A\u00207th\u0020Floor",
    url: "/space/103071",
    eid: 103071,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 16,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_721_GLASS.jpg ",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103071"] = "Geisel\u0020721\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_103075",
    title: "Geisel\u0020722\u003A\u00207th\u0020Floor",
    url: "/space/103075",
    eid: 103075,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_722.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_103075"] = "Geisel\u0020722\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_81635",
    title: "Geisel\u0020723\u003A\u00207th\u0020Floor",
    url: "/space/81635",
    eid: 81635,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_723.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_81635"] = "Geisel\u0020723\u003A\u00207th\u0020Floor";                                    resources.push({
    id: "eid_81636",
    title: "Geisel\u0020724\u003A\u00207th\u0020Floor",
    url: "/space/81636",
    eid: 81636,
    gid: 35689,
    lid: 11273,
    grouping: "Geisel\u0020Tower\u0020Study\u0020Rooms\u0020\u0028Floors\u00205\u002D7\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "https://libapps.s3.amazonaws.com/customers/55/images/gsr_724.jpg",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_81636"] = "Geisel\u0020724\u003A\u00207th\u0020Floor";                                                                                    resources.push({
    id: "eid_142340",
    title: "Geisel\u0020Service\u0020Hub\u0020Room\u00201",
    url: "/space/142340",
    eid: 142340,
    gid: 35687,
    lid: 11273,
    grouping: "Geisel\u0020Service\u0020Hub\u0020Rooms\u0020\u00282nd\u0020floor\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_142340"] = "Geisel\u0020Service\u0020Hub\u0020Room\u00201";                                    resources.push({
    id: "eid_142341",
    title: "Geisel\u0020Service\u0020Hub\u0020Room\u00203",
    url: "/space/142341",
    eid: 142341,
    gid: 35687,
    lid: 11273,
    grouping: "Geisel\u0020Service\u0020Hub\u0020Rooms\u0020\u00282nd\u0020floor\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_142341"] = "Geisel\u0020Service\u0020Hub\u0020Room\u00203";                                    resources.push({
    id: "eid_142342",
    title: "Geisel\u0020Service\u0020Hub\u0020Room\u00204",
    url: "/space/142342",
    eid: 142342,
    gid: 35687,
    lid: 11273,
    grouping: "Geisel\u0020Service\u0020Hub\u0020Rooms\u0020\u00282nd\u0020floor\u0029",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 4,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 1,
});

resourceNameIdMap["eid_142342"] = "Geisel\u0020Service\u0020Hub\u0020Room\u00204";                                                                                    resources.push({
    id: "eid_103032",
    title: "Pod\u00201\u003A\u0020PC\u0020with\u002022\u0022\u0020Wacom\u0020Drawing\u0020Tablet",
    url: "/space/103032",
    eid: 103032,
    gid: 21660,
    lid: 11273,
    grouping: "Digital\u0020Media\u0020Lab\u0020\u0028DML\u0029\u0020\u002D\u0020Single\u0020Seats",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 1,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 1,
    isPowered: 1,
});

resourceNameIdMap["eid_103032"] = "Pod\u00201\u003A\u0020PC\u0020with\u002022\u0022\u0020Wacom\u0020Drawing\u0020Tablet";                                    resources.push({
    id: "eid_103033",
    title: "Pod\u00202\u003A\u0020Wacom\u002032\u0022\u0020pro\u0020\u002DHigh\u0020Performance\u0020PC\u0020\u002D2x\u0020RTX\u00202080ti\u0020GPU,\u0020i9,\u002064gb\u0020Ram",
    url: "/space/103033",
    eid: 103033,
    gid: 21660,
    lid: 11273,
    grouping: "Digital\u0020Media\u0020Lab\u0020\u0028DML\u0029\u0020\u002D\u0020Single\u0020Seats",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 1,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 1,
    isPowered: 1,
});

resourceNameIdMap["eid_103033"] = "Pod\u00202\u003A\u0020Wacom\u002032\u0022\u0020pro\u0020\u002DHigh\u0020Performance\u0020PC\u0020\u002D2x\u0020RTX\u00202080ti\u0020GPU,\u0020i9,\u002064gb\u0020Ram";                                    resources.push({
    id: "eid_103036",
    title: "Pod\u00205\u003A\u0020PC\u0020with\u0020dual\u002024\u0022\u0020monitors",
    url: "/space/103036",
    eid: 103036,
    gid: 21660,
    lid: 11273,
    grouping: "Digital\u0020Media\u0020Lab\u0020\u0028DML\u0029\u0020\u002D\u0020Single\u0020Seats",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 1,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 0,
});

resourceNameIdMap["eid_103036"] = "Pod\u00205\u003A\u0020PC\u0020with\u0020dual\u002024\u0022\u0020monitors";                                    resources.push({
    id: "eid_103037",
    title: "Pod\u00206\u003A\u0020\u0020Imaging\u0020Station\u0020\u002D\u0020Scanner\u0020\u002D\u0020Microscope\u0020\u002D\u00203D\u0020SFM\u0020",
    url: "/space/103037",
    eid: 103037,
    gid: 21660,
    lid: 11273,
    grouping: "Digital\u0020Media\u0020Lab\u0020\u0028DML\u0029\u0020\u002D\u0020Single\u0020Seats",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 1,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 0,
});

resourceNameIdMap["eid_103037"] = "Pod\u00206\u003A\u0020\u0020Imaging\u0020Station\u0020\u002D\u0020Scanner\u0020\u002D\u0020Microscope\u0020\u002D\u00203D\u0020SFM\u0020";                                                                                    resources.push({
    id: "eid_102828",
    title: "Datacruncher",
    url: "/space/102828",
    eid: 102828,
    gid: 27115,
    lid: 11273,
    grouping: "Data\u0020\u0026\u0020GIS\u0020Lab\u0020\u002D\u0020Single\u0020Seats",
    gtype: 2,
    gBookingSelectableTime: false,
    capacity: 1,
    hasInfo: true,
    thumbnail: "",
    isAccessible: 0,
    isPowered: 0,
});

resourceNameIdMap["eid_102828"] = "Datacruncher";                                    
        
        var paginatedResources = springyPagination.createPaginatedResources(resources, springyPage.pageSize);

        var capacityRangesMap = {};
                                capacityRangesMap[0] = {
                min: 0,
                max: 9223372036854775807
            };
                                capacityRangesMap[1] = {
                min: 0,
                max: 2
            };
                                capacityRangesMap[2] = {
                min: 3,
                max: 4
            };
                                capacityRangesMap[3] = {
                min: 5,
                max: 8
            };
                                capacityRangesMap[4] = {
                min: 9,
                max: 9223372036854775807
            };
        
        var resourceSettings = createResourceSettings(0);

        springyPage.resourceCount = resources.length;
    </script>
    
    <script>
    var pendingBookingsLimitIssues = null;
    var dateFormatStartTimeDict = "MMDDHHmm";
    var dateFormatDayOfYear = "YYYY-MM-DD";
    var issueTypeAdditionalText = {
        "duration": " minutes",
        "frequency": " bookings",
    };
    var frequencyDisplayStrings = {
        "d": " per\u0020day",
        "w": " per\u0020week",
        "m": " per\u0020month",
        "y": " per\u0020year",
        "t": " at\u0020a\u0020time",
    };

    function pendingRoomBookingsAreNowEmpty() {
        jQuery("#s-lc-eq-form-box").hide();
    }

    function renderPendingRoomBookings() {
        // ensure all tooltips are hidden
        jQuery(".tooltip").hide();

        if (pendingRoomBookings.length == 0) {
            pendingRoomBookingsAreNowEmpty();
            return;
        }

        // refresh the shown cart items
        // format the room data as html
        var html = '<div>';

        var startDateTimeFormat = springyPage.isDailyBookings ? springSpace.dateFormat : springSpace.getDateTimeFormat();
        var endDateTimeFormat = springyPage.isDailyBookings ? springSpace.dateFormat : springSpace.getShortDateTimeFormat();
        var totalCost = 0;

        for (var i = 0; i < pendingRoomBookings.length; i++) {
            var bookingInfo = pendingRoomBookings[i];
            var bookingCost = bookingInfo.cost;
            var resourceId = bookingInfo.seat_id > 0 ? bookingInfo.seat_id : bookingInfo.eid;
            var resourceName = resourceNameIdMap['eid_' + resourceId];

            html += '<div class="form-group s-lc-pending-booking" id="pending_booking_' + bookingInfo.id + '">';
            html += '   <label class="col-md-5 control-label" for="bookingend_' + bookingInfo.id + '"><strong>' + resourceName + '</strong>: ' + bookingInfo.start.format(startDateTimeFormat) + ' ' + springLang.eq_js_until_det + '</label>';
            html += '   <div class="col-md-3">';
            html += '     <div class="input-group">';
            html += '           <select id="bookingend_' + bookingInfo.id + '" name="bookingend_' + bookingInfo.id + '" data-booking="' + bookingInfo.id + '" class="form-control input-sm b-end-date">';

            for (var selectionIndex = 0; selectionIndex < bookingInfo.options.length; selectionIndex++) {
                var selected = bookingInfo.optionSelected == selectionIndex ? 'selected="selected"' : '';
                var value = bookingInfo.options[selectionIndex];
                var name = moment(value).format(endDateTimeFormat);
                var checksum = bookingInfo.optionChecksums[selectionIndex];
                html += '<option value="' + value + '" ' + selected + ' data-crc="' + checksum + '">' + name + '</option>';
            }

            html += '           </select>';
            html += '           <div class="input-group-btn">';
            html += '               <button type="button" class="btn btn-default btn-sm" onclick="return removePendingBooking(' + bookingInfo.id + ',' + bookingInfo.lid + ');"><i class="fa fa-trash-o" aria-hidden="true"></i><span class="sr-only">' + springLang.eq_js_rem_pending + '</span></button>';
            html += '           </div>';
            html += '       </div>';
            html += '     </div>';
            if (bookingCost > 0) {
                var costDisplay = springSpace.formatCurrency(bookingCost);
                var costPreview = "\u007Bamount\u007D".replace("\u007Bamount\u007D", costDisplay).replace("\u007Brate\u007D", "");
                html += '<label class="col-md-3 control-label s-lc-billing-cost-single">' + costPreview + '</label>';
            }
            html += '   </div>';
            html += '   </div>';
            html += '</div>';

            totalCost += bookingCost;
        }

        var bookingDurationOkay = true;
        if (pendingBookingsLimitIssues) {
            bookingDurationOkay = false;
            pendingBookingsLimitIssues.forEach(function(issueDetails) {
                var limitDisplay = issueDetails.allowed + issueTypeAdditionalText[issueDetails.type] + frequencyDisplayStrings[issueDetails.frequency];
                var usedDisplay = issueDetails.used + issueTypeAdditionalText[issueDetails.type];
                var issueDisplay = 'Sorry,\u0020you\u0020can\u0020only\u0020reserve\u0020\u007BlimitAmount\u007D,\u0020and\u0020you\u0020currently\u0020have\u0020\u007BusedAmount\u007D.\u0020Please\u0020adjust\u0020your\u0020booking.'.replace('{limitAmount}', limitDisplay).replace('{usedAmount}', usedDisplay);
                var issueHtml = '<strong>' + issueDetails.group + '</strong>: ' + issueDisplay;

                html += '\
                    <div class="form-group">\
                        <div class="col-md-offset-1 col-md-10">\
                            <div class="alert alert-warning">' + issueHtml + '</div>\
                        </div>\
                    </div>';
            });
        }

        if (totalCost > 0) {
            html += '\
                <div class="form-group s-lc-pending-booking">\
                    <label class="col-md-5 control-label">Total\u0020cost\u0020for\u0020this\u0020reservation\u003A</label>\
                    <label class="col-md-5 control-label s-lc-billing-cost-total">' + springSpace.formatCurrency(totalCost) + '</label>\
                </div>';
        }

        html += '</div>';

        // show the booking form box which contains the booking well, the terms + conditions and the booking form
        jQuery("#s-lc-eq-form-box").show();

        // put the item in the displayed cart + set the window focus to the cart
        var roomCart = jQuery("#s-lc-eq-bwell");
        roomCart.empty();
        roomCart.html(html);
        roomCart.focus();

        // disable the add equipment and form submission buttons until the times are okay
        jQuery("#submit_times, #eq_cart").prop('disabled', !bookingDurationOkay);

        // setup delete icon tooltips
        accessibleIcons();

        // make the tooltip for the cart icon
        jQuery("#eq_cart").tooltip({
            title: springLang.eq_js_cart_tt,
            html: true,
            container: "body"
        });

        jQuery('.b-end-date').on('change', function() {
            var changedBooking = jQuery(this);

            updatePendingBookingDuration(changedBooking);
        });
    }

    function preparePendingBookingsPayload() {
        var payload = [];

        for (var i = 0; i < pendingRoomBookings.length; i++) {
            var bookingInfo = pendingRoomBookings[i];
            payload.push({
                id: bookingInfo.id,
                eid: bookingInfo.eid,
                seat_id: bookingInfo.seat_id,
                gid: bookingInfo.gid,
                lid: bookingInfo.lid,
                start: bookingInfo.start.format(springSpace.phpDateTimeFormat),
                end: bookingInfo.end.format(springSpace.phpDateTimeFormat),
                checksum: bookingInfo.checksum,
            });
        }
        return payload;
    }

    function updatePendingBookingsFromData(bookings) {
        pendingRoomBookings = [];

        for (var i = 0; i < bookings.length; i++) {
            var booking = bookings[i];

            pendingRoomBookings.push({
                id: booking.id,
                eid: booking.eid,
                seat_id: booking.seat_id,
                gid: booking.gid,
                lid: booking.lid,
                cost: booking.cost,
                checksum: booking.checksum,

                name: booking.name,
                start: moment(booking.start),
                end: moment(booking.end),

                options: booking.options,
                optionSelected: booking.optionSelected,
                optionChecksums: booking.optionChecksums,
            });
        }
    }

    function pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance) {
        // if we are adding rooms, we might need to hide the previous booking success message
        jQuery("#s-lc-eq-success").hide();

        springySpaces.stopSessionTimer();
        workingAlert();

        // find out booking information
        jQuery.ajax({
            type: "post",
            url: "/spaces/availability/booking/add",
            data: payload,
            dataType: "json",
        })
        .always(stopAlert)
        .done(function(data) {
            if (data.error) {
                if (data.isRefreshRequired) {
                    fcInstance.refetchEvents();
                }

                return errorAlert(data.error);
            }

            // success! the entire pending bookings array can be re-created now
            pendingBookingsLimitIssues = data.limitIssues;
            springySpaces.setSessionId(data.session);
            springySpaces.startSessionTimer();
            updatePendingBookingsFromData(data.bookings);

            // this request might have came back with updated grid data
            // if it did not - refresh the whole grid
            if (data.gridUpdateData) {
                updateGridEventsForItem(data.gridUpdateData, fcInstance);
            } else if (fcInstance) {
                fcInstance.refetchEvents();
            }

            renderPendingRoomBookings();
        })
        .fail(ajaxErrorHandler);

        return false;
    }

    function createStartTimeToClassMap(gridData) {
        var startTimeToClassMap = {};

        gridData.forEach(function(gridElement) {
            var startMoment = moment(gridElement.start);
            startTimeToClassMap[startMoment.format(dateFormatStartTimeDict)] = [gridElement.className];
        });

        return startTimeToClassMap;
    }

    function updateGridEventsForItem(gridUpdateData, fcInstance) {
        var changedItemId = gridUpdateData.itemId;
        var changedRangeStart = moment(gridUpdateData.dateStart, springSpace.phpDateTimeFormat);
        var changedRangeEnd = moment(gridUpdateData.dateEnd, springSpace.phpDateTimeFormat);
        var startTimeToClassMap = createStartTimeToClassMap(gridUpdateData.gridData);

        fcInstance.batchRendering(function() {
            fcInstance.getEvents().forEach(function (clientEvent) {
                if (clientEvent.extendedProps.itemId !== changedItemId) {
                    return;
                }

                var clientEventStart = moment(clientEvent.start);
                // if this event is before the day of events that was changed - forget it
                // and we only want to process events that start before the changed range "end"
                if (clientEventStart.isBefore(changedRangeStart) || !clientEventStart.isBefore(changedRangeEnd)) {
                    return;
                }

                var startKey = clientEventStart.format(dateFormatStartTimeDict);
                if (startKey in startTimeToClassMap) {
                    // this slot is unavailable
                    clientEvent.setProp('classNames', startTimeToClassMap[startKey]);
                    clientEvent.setExtendedProp('status', 1);
                } else {
                    // this slot is available
                    clientEvent.setProp('classNames', ["s-lc-eq-avail"]);
                    clientEvent.setExtendedProp('status', 0);
                }
            });
        });
    }

    function timeGridClickedOnAvailableRoom(calEvent, fcInstance) {
        var resource = calEvent.getResources()[0];
        var resourceData = resource.extendedProps;
        var timeslotData = calEvent.extendedProps;
        var view = fcInstance.view;

        var payload = {
            add: {
                eid: resourceData.eid,
                seat_id: resourceData.seatId,
                gid: resourceData.gid,
                lid: resourceData.lid,
                start: moment(calEvent.start).format(springSpace.phpDateTimeFormat),
                checksum: timeslotData.checksum,
            },
                        lid: 11273,
            gid: 0,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            session: springySpaces.sessionId,
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance);
    }

    function updatePendingBookingDuration(changedBooking) {
        var fcInstance = getCurrentTimelineInstance(11273);
        var view = fcInstance.view;
        var selectedElement = changedBooking.find(':selected');

        var payload = {
            update: {
                id: changedBooking.data('booking'),
                checksum: selectedElement.data('crc'),
                end: changedBooking.val()
            },
                        lid: 11273,
            gid: 0,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            session: springySpaces.sessionId,
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, fcInstance);
    }

    function removePendingBooking(pendingId, locationId) {
        var timeline = getCurrentTimelineInstance(locationId);
        var view = timeline.view;

        var payload = {
            removeId: pendingId,
                        lid: 11273,
            gid: 0,
                        start: moment(view.activeStart).format(dateFormatDayOfYear),
            end: moment(view.activeEnd).format(dateFormatDayOfYear),
            session: springySpaces.sessionId,
            bookings: preparePendingBookingsPayload(),
        }

        return pendingRoomBookingsUpdateListAndAvailability(payload, timeline);
    }

    function formatEventsForFullCalendar(events) {
        events.forEach(function(eventData) {
            eventData.resourceId = "eid_" + eventData.itemId;

            if (eventData.className) {
                // this slot is unavailable
                eventData.status = 1;
                eventData.classNames = [eventData.className];
            } else {
                // this slot is available
                eventData.classNames = ["s-lc-eq-avail"];
                eventData.status = 0;
            }
        });

        return events;
    }

    function timeGridRoomFetchEventsForTimePeriod(start, end, callback, lid, gid, eid) {
        var data = {
            lid: lid,
            gid: gid,
            eid: eid,
            seat: springyPage.isSeatBooking,
            seatId: springyPage.seatId,
            zone: springyPage.zoneId,
            accessible: springyPage.isAccessible,
            powered: springyPage.isPowered,
            start: moment(start).format(dateFormatDayOfYear),
            end: moment(end).format(dateFormatDayOfYear),
            bookings: preparePendingBookingsPayload(),
            pageIndex: springyPage.pageIndex,
            pageSize: springyPage.pageSize,
        };

        var url = '/spaces/availability/grid';

                        if (typeof springyPage.autoCreateBookingDate === 'string') {
            url = '/spaces/availability/grid/pre-create'
            data.autoCreateBookingDate = springyPage.autoCreateBookingDate;
            springyPage.autoCreateBookingDate = null;
        }

        springyCommon.closeAllPopups();

        jQuery.ajax({
            type: 'post',
            url: url,
            data: data,
            dataType: 'json',
        })
        .done(function(data) {
            callback(formatEventsForFullCalendar(data.slots));

            // if we've just started a session as part of this grid view request
            // then we need to update our local state with its details
            if (data.session > 0) {
                springySpaces.setSessionId(data.session);
                springySpaces.startSessionTimer();
                updatePendingBookingsFromData(data.bookings);
                renderPendingRoomBookings();
            }

            var isAtEndOfWindowLimit = data.windowEnd === true;
            jQuery('#s-lc-window-limit-warning').toggle(isAtEndOfWindowLimit);
            jQuery('.fc-next-button').prop('disabled', isAtEndOfWindowLimit);

                        var selectorPrefix = '';
            var isNextAvailableButtonWanted = (document.querySelector(selectorPrefix + '.s-lc-eq-avail') === null);
            jQuery(selectorPrefix + '.fc-goToNextAvailable-button').toggle(isNextAvailableButtonWanted);
        })
        .fail(function(xhr) {
            // let fullcalendar know that the request has completed with no results
            callback([]);

            // and display the error to the user
            ajaxErrorHandler(xhr);
        });
    }
</script>


</body>
</html>
